(function(e){e.fn.customScrollbar=function(t,i){var o={skin:undefined,hScroll:true,vScroll:true,updateOnWindowResize:false,onCustomScroll:undefined};var s=function(t,i){this.$element=e(t);this.options=i;this.addScrollableClass();this.addSkinClass();this.addScrollBarComponents();if(this.options.vScroll)this.vScrollbar=new l(this,new r);if(this.options.hScroll)this.hScrollbar=new l(this,new n);this.$element.data("scrollable",this);if(window.jQueryCustomScrollbars==undefined)window.jQueryCustomScrollbars=[];this.addToScrollbarsHierarchy();this.initKeyboardScrolling();this.bindEvents()};s.prototype={addScrollableClass:function(){if(!this.$element.hasClass("scrollable")){this.scrollableAdded=true;this.$element.addClass("scrollable")}},removeScrollableClass:function(){if(this.scrollableAdded)this.$element.removeClass("scrollable")},addSkinClass:function(){if(typeof this.options.skin=="string"&&!this.$element.hasClass(this.options.skin)){this.skinClassAdded=true;this.$element.addClass(this.options.skin)}},removeSkinClass:function(){if(this.skinClassAdded)this.$element.removeClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort();if(this.$viewPort.length==0){this.$element.wrapInner('<div class="viewport" />');this.assignViewPort();this.viewPortAdded=true}this.assignOverview();if(this.$overview.length==0){this.$viewPort.wrapInner('<div class="overview" />');this.assignOverview();this.overviewAdded=true}this.addScrollBar("vertical","prepend");this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical");this.removeScrollbar("horizontal");if(this.overviewAdded)this.$element.unwrap();if(this.viewPortAdded)this.$element.unwrap()},removeScrollbar:function(e){if(this[e+"ScrollbarAdded"])this.$element.find(".scroll-bar."+e).remove()},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(e,t){if(this.$element.find(".scroll-bar."+e).length==0){this.$element[t]("<div class='scroll-bar "+e+"'><div class='thumb'></div></div>");this[e+"ScrollbarAdded"]=true}},resize:function(){if(this.vScrollbar)this.vScrollbar.resize();if(this.hScrollbar)this.hScrollbar.resize()},scrollTo:function(e){if(this.vScrollbar)this.vScrollbar.scrollToElement(e);if(this.hScrollbar)this.hScrollbar.scrollToElement(e)},scrollToXY:function(e,t){this.scrollToX(e);this.scrollToY(t)},scrollToX:function(e){if(this.hScrollbar)this.hScrollbar.scrollTo(e)},scrollToY:function(e){if(this.vScrollbar)this.vScrollbar.scrollTo(e)},remove:function(){this.removeScrollableClass();this.removeSkinClass();this.removeScrollbarComponents();this.$element.data("scrollable",null);window.jQueryCustomScrollbars=null;this.removeKeyboardScrolling();if(this.vScrollbar)this.vScrollbar.remove();if(this.hScrollbar)this.hScrollbar.remove()},isInside:function(t,i){var o=e(t);var s=e(i);var l=o.offset();var n=s.offset();return l.top>=n.top&&l.left>=n.left&&l.top+o.height()<=n.top+s.height()&&l.left+o.width()<=n.left+s.width()},addNested:function(e){if(this.addNestedToOneFromList(this.nestedScrollbars,e))return true;else if(this.isInside(e.$viewPort,this.$overview)){this.nestedScrollbars.push(e);return true}else return false},addToScrollbarsHierarchy:function(){this.nestedScrollbars=[];if(!this.addNestedToOneFromList(this,window.jQueryCustomScrollbars))window.jQueryCustomScrollbars.push(this)},addNestedToOneFromList:function(e,t){for(var i=0;i<t.length;i++){if(t[i].addNested(e))return true;else if(e.addNested(t[i])){t[i]=e;return true}}return false},isMouseOver:function(){for(var e=0;e<this.nestedScrollbars.length;e++)if(this.nestedScrollbars[e].isMouseOver())return false;var t=this.$element.offset();var i=this.$element.width();var o=this.$element.height();return this.lastMouseEvent&&this.lastMouseEvent.pageX>=t.left&&this.lastMouseEvent.pageX<=t.left+i&&this.lastMouseEvent.pageY>=t.top&&this.lastMouseEvent.pageY<=t.top+o},initKeyboardScrolling:function(){var t=this;this.documentKeydown=function(e){if(t.isMouseOver()){if(t.vScrollbar)t.vScrollbar.keyScroll(e);if(t.hScrollbar)t.hScrollbar.keyScroll(e)}};e(document).keydown(this.documentKeydown);this.documentMousemove=function(e){t.lastMouseEvent=e};e(document).mousemove(this.documentMousemove)},removeKeyboardScrolling:function(){e(document).unbind("keydown",this.documentKeydown);e(document).unbind("mousemove",this.documentMousemove)},bindEvents:function(){if(this.options.onCustomScroll)this.$element.on("customScroll",this.options.onCustomScroll)}};var l=function(e,t){this.scrollable=e;this.sizing=t;this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element);this.$thumb=this.$scrollBar.find(".thumb");this.setScrollPosition(0,0);this.resize();this.initMouseMoveScrolling();this.initMouseWheelScrolling();this.initTouchScrolling();this.initMouseClickScrolling();this.initWindowResize()};l.prototype={resize:function(){this.scrollable.$viewPort.height(this.scrollable.$element.height());this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element));this.viewPortSize=this.sizing.size(this.scrollable.$viewPort);this.overviewSize=this.sizing.size(this.scrollable.$overview);this.ratio=this.viewPortSize/this.overviewSize;this.sizing.size(this.$scrollBar,this.viewPortSize);this.thumbSize=Math.round(this.ratio*this.viewPortSize);this.sizing.size(this.$thumb,this.thumbSize);this.maxThumbPosition=this.calculateMaxThumbPosition();this.maxOverviewPosition=this.calculateMaxOverviewPosition();this.enabled=this.overviewSize>this.viewPortSize;if(this.scrollPercent===undefined)this.scrollPercent=0;if(this.enabled)this.rescroll();else this.setScrollPosition(0,0);this.$scrollBar.toggle(this.enabled)},initMouseMoveScrolling:function(){var t=this;this.$thumb.mousedown(function(e){if(t.enabled)t.startMouseMoveScrolling(e)});this.documentMouseup=function(e){t.stopMouseMoveScrolling(e)};e(document).mouseup(this.documentMouseup);this.documentMousemove=function(e){t.mouseMoveScroll(e)};e(document).mousemove(this.documentMousemove);this.$thumb.click(function(e){e.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind();e(document).unbind("mouseup",this.documentMouseup);e(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var e=this;this.scrollable.$element.mousewheel(function(t,i,o,s){if(e.enabled){e.mouseWheelScroll(o,s);t.preventDefault();t.stopPropagation()}})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var e=this;this.elementTouchstart=function(t){if(e.enabled)e.startTouchScrolling(t)};this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart);this.documentTouchmove=function(t){e.touchScroll(t)};document.addEventListener("touchmove",this.documentTouchmove);this.elementTouchend=function(t){e.stopTouchScrolling(t)};this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){if(document.addEventListener){this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart);document.removeEventListener("touchmove",this.documentTouchmove);this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend)}},initMouseClickScrolling:function(){var e=this;this.scrollBarClick=function(t){e.mouseClickScroll(t)};this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var t=this;this.windowResize=function(){t.resize()};e(window).resize(this.windowResize)}},removeWindowResize:function(){e(window).unbind("resize",this.windowResize)},isKeyScrolling:function(e){return this.keyScrollDelta(e)!=null},keyScrollDelta:function(e){for(var t in this.sizing.scrollingKeys)if(t==e)return this.sizing.scrollingKeys[e](this.viewPortSize);return null},startMouseMoveScrolling:function(t){this.mouseMoveScrolling=true;e("html").addClass("not-selectable");this.setUnselectable(e("html"),"on");this.setScrollEvent(t)},stopMouseMoveScrolling:function(t){this.mouseMoveScrolling=false;e("html").removeClass("not-selectable");this.setUnselectable(e("html"),null)},setUnselectable:function(e,t){if(e.attr("unselectable")!=t){e.attr("unselectable",t);e.find(":not(input)").attr("unselectable",t)}},mouseMoveScroll:function(e){if(this.mouseMoveScrolling)this.moveScroll(e,1)},moveScroll:function(e,t){var i=this.sizing.mouseDelta(this.scrollEvent,e)*t;this.scrollBy(Math.round(i*this.overviewSize/this.viewPortSize));this.setScrollEvent(e)},startTouchScrolling:function(e){if(e.touches&&e.touches.length>0){this.setScrollEvent(e.touches[0]);this.touchScrolling=true}},touchScroll:function(e){if(this.touchScrolling&&e.touches&&e.touches.length>0){this.moveScroll(e.touches[0],-1);e.preventDefault()}},stopTouchScrolling:function(e){this.touchScrolling=false},mouseWheelScroll:function(e,t){var i=this.sizing.wheelDelta(e,t)*-20;if(i!=0)this.scrollBy(i)},mouseClickScroll:function(e){var t=this.viewPortSize-20;if(e["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()])// mouse click over thumb
t=-t;this.scrollBy(t)},keyScroll:function(e){var t=e.which;if(this.enabled&&this.isKeyScrolling(t)){this.scrollBy(this.keyScrollDelta(t));e.preventDefault()}},scrollBy:function(e){var t=-this.scrollable.$overview.position()[this.sizing.offsetComponent()];t+=e;this.scrollTo(t)},scrollTo:function(e){if(e<0)e=0;if(e>this.maxOverviewPosition)e=this.maxOverviewPosition;var t=this.scrollPercent;this.scrollPercent=e/this.maxOverviewPosition;var i=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(e,i);if(t!=this.scrollPercent)this.triggerCustomScroll(t)},triggerCustomScroll:function(e){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(e,this.scrollPercent),scrollPercent:Math.round(this.scrollPercent*100)})},rescroll:function(){var e=this.scrollPercent*this.maxThumbPosition;var t=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(t,e)},setScrollPosition:function(e,t){this.$thumb.css(this.sizing.offsetComponent(),t+"px");this.scrollable.$overview.css(this.sizing.offsetComponent(),-e+"px")},calculateMaxThumbPosition:function(){return this.sizing.size(this.$scrollBar)-this.thumbSize},calculateMaxOverviewPosition:function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)},setScrollEvent:function(e){var t="page"+this.sizing.scrollAxis();if(!this.scrollEvent||this.scrollEvent[t]!=e[t])this.scrollEvent={pageX:e.pageX,pageY:e.pageY}},scrollToElement:function(e){var t=e;if(this.sizing.isInside(t,this.scrollable.$overview)&&!this.sizing.isInside(t,this.scrollable.$viewPort)){var i=t.offset();var o=this.scrollable.$overview.offset();var s=this.scrollable.$viewPort.offset();this.scrollTo(i[this.sizing.offsetComponent()]-o[this.sizing.offsetComponent()])}},remove:function(){this.removeMouseMoveScrolling();this.removeMouseWheelScrolling();this.removeTouchScrolling();this.removeMouseClickScrolling();this.removeWindowResize()}};var n=function(){};n.prototype={size:function(e,t){if(t)return e.width(t);else return e.width()},scrollBar:function(e){return e.find(".scroll-bar.horizontal")},mouseDelta:function(e,t){return t.pageX-e.pageX},offsetComponent:function(){return"left"},wheelDelta:function(e,t){return e},scrollAxis:function(){return"X"},scrollDirection:function(e,t){return e<t?"right":"left"},scrollingKeys:{37:function(e){return-10},39:function(e){return 10}},isInside:function(t,i){var o=e(t);var s=e(i);var l=o.offset();var n=s.offset();return l.left>=n.left&&l.left+o.width()<=n.left+s.width()}};var r=function(){};r.prototype={size:function(e,t){if(t)return e.height(t);else return e.height()},scrollBar:function(e){return e.find(".scroll-bar.vertical")},mouseDelta:function(e,t){return t.pageY-e.pageY},offsetComponent:function(){return"top"},wheelDelta:function(e,t){return t},scrollAxis:function(){return"Y"},scrollDirection:function(e,t){return e<t?"down":"up"},scrollingKeys:{38:function(e){return-10},40:function(e){return 10},33:function(e){return-(e-20)},34:function(e){return e-20}},isInside:function(t,i){var o=e(t);var s=e(i);var l=o.offset();var n=s.offset();return l.top>=n.top&&l.top+o.height()<=n.top+s.height()}};return this.each(function(){if(t==undefined)t=o;if(typeof t=="string"){var l=e(this).data("scrollable");if(l)l[t](i)}else if(typeof t=="object"){t=e.extend(o,t);new s(e(this),t)}else throw"Invalid type of options"})}})(jQuery);(function(e){var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var i=t.length;i;){e.event.fixHooks[t[--i]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=t.length;e;){this.addEventListener(t[--e],o,false)}}else{this.onmousewheel=o}},teardown:function(){if(this.removeEventListener){for(var e=t.length;e;){this.removeEventListener(t[--e],o,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function o(t){var i=t||window.event,o=[].slice.call(arguments,1),s=0,l=true,n=0,r=0;t=e.event.fix(i);t.type="mousewheel";// Old school scrollwheel delta
if(i.wheelDelta){s=i.wheelDelta/120}if(i.detail){s=-i.detail/3}// New school multidimensional scroll (touchpads) deltas
r=s;// Gecko
if(i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS){r=0;n=s}// Webkit
if(i.wheelDeltaY!==undefined){r=i.wheelDeltaY/120}if(i.wheelDeltaX!==undefined){n=i.wheelDeltaX/120}// Add event and delta to the front of the arguments
o.unshift(t,s,n,r);return(e.event.dispatch||e.event.handle).apply(this,o)}})(jQuery);