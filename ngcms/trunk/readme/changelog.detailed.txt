=========================================================================================
* Полный список изменений в сборке "Next Generation CMS"
=========================================================================================
[0.9.0 Release]
- Исправлена ошибка в инсталляторе - на хостингах с PHP версии 4.x некорректно
  формировались пути (на 5.x этой проблемы не было)
- Добавлена поддержка плагина tags в шаблон по умолчанию "default"
- Расширены возможности ручного управления стилями в плагине tags
- Учтена ситуация, что на некоторых хостингах может быть запрещено определение
  свободного места

[0.9.0 Release Candidate 05]
- Восстановлен редактор шаблонов
- Исправлена ошибка: при фильтрации пользователей по логину неверно отображался
  счетчик страниц
- Устранена потенциальная проблема при авторизации: пользователь со включенным в
  firewall'е режимом сокрытия HTTP_REFERER мог переадресовываться в никуда
- Изменена логика формирования информационного email сообщения о поступлении нового 
  комментария - добавлена доп. информация (текст самого сообщения так и остался
  в lang файле).
- Исправлены шаблоны default / globlog - при установке не в корень сайта в них не
  работала ссылка на выход с сайта
  

[0.9.0 Release Candidate 04]
- Теперь при удалении пользователя также удаляется его фотография и аватарка
- Переработан интерфейс работы с картинками в админ-панели
- Файл captcha.php перенесён из engine/trash/ в engine/
- Добавлены новые поля в SQL таблицы images и files


[0.9.0 Release Candidate 03]
- Добавлена поддержка варианта написания BB кода spoiler: [spoiler="ТЕКСТ"]..[/spoiler]
- Добавлена поддержка блоков [fullnews]..[/fullnews], [nofullnews]..[/nofullnews],
  [comments]..[/comments], [nocomments]..[/nocomments] в шаблонах news.short.tpl и
  news.full.tpl
- Исправлены опечатки в install скрипте из-за которых установка не в корень сайта
  была невозможна
- Исправлены опечатки в языковых файлах
- Шаблон globlog теперь полностью работоспособен

[0.9.0 Release Candidate 02]
- Убраны некоторые warning'и, всплывавшие при редактировании категорий
- Теперь при последовательном добавлении категорий и подкатегорий нет необходимости
  перезагружать страницу - сразу после добавления категорию можно использовать в качестве
  "родительской" для новосоздаваемой.
- Добавлена возможность искать пользователей в админ панели
- Исправлены опечатки в путях к плагинам (старый путь /extras/ заменен на /plugins/)
- Исправлена ошибка инсталл-скрипта из-за которой не выставлялась кодировка для таблиц в БД
- Временно отключен механизм редактирования шаблонов

[0.9.0 Release Candidate 01]
- Переделан "с нуля" скрипт-инсталлятор, теперь он интуитивно понятен
- Добавлена возможность задавать собственные шаблоны для новостей категорий из интерфейса
  управления категориями
- Добавлена возможность задавать кол-во новостей, отображаемых в конкретной категории
- Добавлена интеграция с сервисом глобальных аватаров gravatar.com
- Исправлена ошибка из-за которой не на всех версиях mySQL могла корректно 
  создаться БД при инсталляции
- Добавлен внутренний массив-описание, отвечающий за заголовок страницы.
  Теперь на всех страницах появились корректные заголовки и плагины
  получили возможность самостоятельно управлять заголовками своих (и не 
  только своих) страниц
- Оптимизирован механизм активации учётной записи
- В редактировании новостей добавлен новый фильтр: по статусу новости (все/
  только опубликованные/только неопубликованные)
- В редактировании новостей в список новостей добавлена новая колонка - 
  кол-во комментариев к новости
- Добавлен новый BB код: [spoiler] ... [/spoiler]
- В администрировании пользователей добавлена возможность устанавливать 
  кол-во пользователей, отображаемых на странице
- Теперь кол-во неопубликованных новостей выводится рядом с ссылкой 
  "редактировать" и не мозолит глаза
- В шаблоне usermenu.tpl добавлен блок [isnt-logged] .. [/isnt-logged], 
  который отображается если пользователь не залогинен
- При отображении пользовательского меню добавлен новый экшн: usermenu, он
  позволит плагинам выводить в этот блок свою информацию
- Исправлена ошибка из-за которой нельзя было отредактировать комментарий, 
  состоящий из одной цифры ноль ( '0' )
- Изменён формат наименования файлов-резервных копий БД, теперь формат стал: 
  ГГГГ_ММ_ДД_чч_мм
- Переделан механизм создания резервных копий БД, теперь он создаёт описания 
  структуры таблиц а также может корректно работать на больших таблицах
- Исправлена ошибка из-за которой при редактировании новостей символы
  HTML-символы &lt;,... заменялись на их представление ( '<' )
- Добавлен новый фильтр новостей - обработчик события massNewsModify и 
  massNewsModifyNotify. Благодаря этому фильтру плагин tags (и другие, 
  которые создают индексную информацию по новостям) сможет полностью 
  корректно работать.
- Добавлены новые фильтры-события для новостей onBeforeShow() и onAfterShow(),
  они позволяют создавать плагины, которые будут выводить информацию
  перед/после блока новостей.
- Исправлена ошибка из-за которой не вызывался обработчик события 
  deleteNewsNotify при массовом удалении новостей
- Добавлен новый класс-фильтр для админ-панели: FilterAdminCategories, 
  теперь плагины могут вмешиваться в отображение формы редактирования 
  категорий
- Теперь при отключении BB кодов их панель не будет отображаться при 
  добавлении новостей
- Добавлена возможность задавать собственный шаблон для формы добавления 
  комментариев
- Убран лишний SQL запрос - теперь для определения заголовка новости нам 
  не требуется обращаться в БД
- Доработан код функции, отвечающей за создание плагинами собственных SQL
  таблиц, теперь проблема с кодировкой в плагине голосования (и других)
  полностью решена
- Плагинам добавлена возможность делать пред-загрузку других плагинов,
  которые им необходимы в работе - расширены возможности функции load_extras()
- Плагины теперь могут хранить собственные библиотеки, доступные другим
  плагинам, появилась новая функция loadPluginLibrary()
- Плагины теперь могут для разных экшнов загружать разные файлы с кодом.
  Это позволит в некоторых случаях плагинам заметно уменьшить объём кода,
  загружаемого плагином. К примеру, все подпрограммы, необходимые только
  при редактировании новостей, могут быть вынесены в отдельный файл и 
  загружаться только при необходимости
- Из кода движка убраны ставшие ненужными функции, отвечающие за рейтинг
  пользователей/новостей
- В поиске убрана подсветка найденных данных. Это временное решение проблемы
  из-за которой подсветка могла повреждать HTML код
- Расширены возможности профайлинга - теперь движок может отслеживать
  время исполнения SQL запросов (функция профайлинга может потребоваться
  разработчикам плагинов)
- Создана новая функция урезания HTML кода, которая позволит корректно
  закрывать открытые теги и учитывать только текст новости. Функция внесена
  в код движка и может использоваться любыми плагинами
- Добавлена поддержка переменных вида {plugin_PLUGINID_VAR}, переменные
  такого вида отображаются только в случае, если плагин PULUGINID активен
- Оптимизирован загрузчик админ-панели, добавлены новые экшны
- Оптимизирован загрузчик движка ( index.php )
- Добавлена возможность при редактировании новостей задавать кол-во просмотров
  новости
- Оптимизирован HTML код вставки BB кодов, оптимизирован HTML код и оформление
  формы редактирования новостей
- Исправлена ошибка: при массовом удалении комментариев в новости, комментарии
  удалялись даже если администратор на вопрос "Хотите удалить комментарии?" отвечал "нет"

- Внесено множество обновлений в плагины, фактически 80% плагинов
  имеют новую версию.

=========================================================================================
* Список изменений в сборках "CMS 2z project", которые собирал Vitaly Ponomarev:
=========================================================================================

2z project 0.9.7 FixPack #04
----------------------------
- Плагины получили возможность блокировать добавление/редактирование новостей.
- В случае неуспешного добавления новости (неверно заполнены параметры или
  плагин заблокировал добавление новости) теперь сохраняются заполненные
  вами значения в формах. Сохранение реализовано при помощи JavaScript, поэтому
  его поддержка необходима.
- Немного изменена страница статистики системы
- Добавлен параметр "Кол-во страниц с новостями для отображения" отвечающий
  за кол-во страниц, на которые будут "быстрые ссылки" с номерами страниц
- Изменено отображение списка плагинов, добавлены ссылки на readme/history файлы
- Исправлено отображение аватары пользователя в шаблоне usermenu.tpl
- Исправлена ошибка, не позволявшая редактировать шаблоны плагинов, которые располагались
  _внутри_ основного шаблона сайта
- Исправлена ошибка из-за которой неправильно работало постраничное отображение списка
  зарегистрированных пользователей при включении сортировки по логину
- При добавлении/редактировании новости теперь можно указывать не только название
  категорий, но и их ID
- Плагины получили возможность перехватывать событие "массовое изменение новостей",
  это позволит плагину tags корректно работать с новостями которые ставят/снимают
  с публикации
- При отображении новостей заложена возможность задания собственных шаблонов
  отображения для категорий.
  Пока эта возможность конфигурируется _только_ в коде, т.к. при выпуске FixPack'ов
  проводить изменения в структуре БД крайне нежелательно, а подобное расширение
  требует как раз изменение структуры БД.
  Если хотите использовать данную функцию, то обращайтесь на форум в раздел FAQ
- Изменена логика генерации версии для печати. Теперь на ней отоображаются все страницы
  новости, а не первая (как было ранее)
- При отображении короткой новости в шаблон добавлена переменная {alternating}, которая
  принимает значения "odd"/"even" в зависимости от того является ли данная новость
  чётной или нечётной (при отображении по порядку)
- Расширены возможности парсера BB кодов [url] и [img] - теперь они корректно работают
  с файлами, чьи имена содержат символы "[]"
- Обновлён upgrade скрипт, добавлена последняя функция - перенос уменьшенных копий
  фотографий пользователей
- Внесено несколько изменений в ядро в плане работы с модулями авторизации. Изменения
  необходимы для корректной работы плагина auth_vb - авторизация через БД vBulletin

- Выпущены обновлённые версии плагинов:
  archive
  auth_basic
  auth_punbb
  calendar
  favorites
  filter
  finance
  fin_wm
  nsched
  popular
  rating
  rss_export
  switcher
  tags
  xfields


2z project 0.9.7 FixPack #03
----------------------------
- В основной .htaccess добавлена строка "php_flag allow_call_time_pass_reference on",
  которая решает проблему с возникающим на некоторых хостигах сообщением о
  необходимости включения данного флага.
- В админ панели в шаблоне редактирования новости изменено:
  * исправлена ошибка с неправильно работающим предпросмотром
  * исправлена ошибка с неотображением комментариев
  - теперь комментарий отображается полностью, при отображении парсятся BB коды
- Добавлены новые точки загрузки плагинов (прописываются в параметре "Acts" файла version):
  + comments        - работа с комментариями
  + comments:add    - добавление комментариев
  + comments:show   - показ комментариев
  + news            - работа с новостями
  + news:show       - показ новостей
  + news:show:one   - показ одной (обычно - полной) новости
  + news:show:list  - показ списка новостей
- Расширен функционал модуля отображения новостей, теперь внешние плагины
  могут использовать его для отображения новости в заданном шаблоне или для
  корректного процессинга новости, которая будет выводиться пользователю (к примеру,
  такой режим используется в новой версии плагина rss_export)
- Расширен набор возможностей для плагинов-фильтров: теперь они могут определять кто 
  их вызывает - ядро системы или другой плагин
- Шаблон для смайлов, отображаемых в форме добавления комментария, теперь может браться
  не только из шаблона админ-интерфейса, но и из общего шаблона сайта
  (если в шаблоне сайта найден файл smilies.tpl - он берётся из шаблона сайта, иначе -
  из шаблона админ-интерфейса)
- При генерации списка активных плагинов (файл 2z/conf/plugins.php) в заголовок теперь
  добавляется "<?php " вместо "<? " как было раньше. Изменение позволяет решить проблему
  на некоторых хостингах
- Исправлена ошибка из-за которой не отображались комментарии при отключении аватаров
- Исправлена ошибка в поиске из-за которых по русским символам поиск работал только на
  тех хостингах, где кодировка по умолчанию для PHP была выставлена в win1251
- Изменён аглоритм парсинга BB тегов [url] и [img]. Решены найденные проблемы, тегу
  [url] добавлен возможный параметр title. Пример:
  [url=http://ya.ru/ title="Мой яндекс"]Поисковик[/url]
  Заложен базис для разбора любых новых сложных (с несколькими параметрами) BB кодов.

Изменения в плагинах:
- auth_punBB [0.04]
  * Исправлена ошибка из-за которой в некоторых ситуациях было возможно создание
    дублирующихся записей в БД punBB
  + Добавлена поддержка языковых файлов, весь текст перенесён теперь в них
  + Написана расширенная документация по установке плагина
- gsmg [0.04] - добавлен плагин Google SiteMap Generator
- varmgr [0.03]
  + Плагин оптимизирован для работы в версии 0.9.7
  * Обновлена документация - она стала более детальной
- finance [0.06]
  + Выложено описание API, доступное для внешних плагинов
- rss_export [0.04]
  * Изменена логика генерации rss ленты, данные формируются используя стандартный
    модуль, предназначенный для генерации новостей.
    В минусе - некоторое уменьшение скорости работы.
    В плюсе - логика генерации RSS полностью соответствует логике генерации новостей.



2z project 0.9.7 FixPack #02
----------------------------
- В управлении изображениями добавлены следующие возможности:
  - Выбор режима создания уменьшенной копии (по запросу/запретить/всегда)
  - Выбор режима добавления тени (по запросу/запретить/всегда)
  - Выбор расположения тени (оригинал/копия/оригинал+копия)
  - Выбор режима добавления штампа (по запросу/запретить/всегда)
  - Выбор расположения штампа (оригинал/копия/оригинал+копия)
- Сильно передал режим предпросмотра, теперь он работает наиболее
  близко с режимом добавления новости, поэтому создаваемый им
  вариант наиболее полно соответствует будущему внешнему виду новости.
  Учитывается установка различных флагов, отрисовываюся формы различных
  плагинов (xfields, finance,...)
- Разрешено использования символа "минус" в альт. имени новостей/статических
  страниц. Некоторые поисковики (Google) минус расценивают как пробел
  и более адекватно воспринимают альт. имя.
- Убран ошибочный код который вызывал повторный парсинг данных на предмет
  отображения BB-кодов и смайлов
- Изменён базовый файл, ответственный за вывод новостей. Теперь внешние
  приложения смогут вызывать код отображения новостей из категории либо
  конктерной новости, при этом можно установить свой собственный шаблон
  для отображения.
- Расширены возможности функции locatePluginTemplates() - теперь она может
  искать не только файлы-шаблоны, но и обыкновенные файлы.
- Внесены изменения кода, позволяющие в комментариях использовать несколько
  кириллических символов, используемых в украинском языке.
  Сделано в виде work-around'а через механизм BB-кодов, правильное решение 
  возможно только при переходе на UTF-8 версию. Всем украинским администраторам
  рекомендовано не отключать BB коды для корректного отображения символов,
  исползуемых в украинском языке и не содержащихся в кодовой таблице Win-1251.
- Добавлено исполнение новостных фильтров в поиске. Это позволит корректно
  отрабатывать плагинам xfields, finance во время поиска.
- В файл-шаблон создания новости (шаблона сайта по умолчанию) добавлена служебная
  HTML форма, используемая для корректной вставки файлов/новостей.
- Добавлена поддержка скинов в плагин rating, заменен существующий шаблон рейтинга
  на страрый но более приятный
- Обновлена информация о плагинах favorites, nsched
- Исправлен баг в плагине calendar
- Добавлено описание для плагина switcher
- Добавлен плагин xfields


2z project 0.9.7, 2008-05-05
----------------------------

Исправление ошибок:
- Исправлена ошибка с кодом безопасности при регистрации
- Исправлена ошибка когда после обновления вместо русских букв были вопросы
- Исправлена возможная ошибка при установке плагинов
- При массовом удалении новостей теперь обновляется счетчик комментариев пользователей
- При неправильном указании списка категорий была возможна ситуация, что зайти в новость
  с сайта не удавалось (решением было отредактировать новость и сохранить)
- Исправлена ошибка с неправильной обработкой счетчиков при массовом удалении комментариев
- Исправлена ошибка: при редактировании новости пропадали переводы строки с начала новости
- Исправлена проблема при которой в комментариях отрабатывали внутренние переменные
  (к примеру, {user_menu})
- Исправлена фича из-за которой в момент редактирования новости, ей можно было назначить
  альт. имя уже занятое другой новостью.
- Исправлены проблемы с личными сообщениями
- Исправлена проблема с отображением captcha кодов на некоторых хостингах. Теперь к TTF шрифту, 
  используемому для captcha, прописывается абсолютный путь.

Другие изменения:
- При добавлении/изменении/удалении новостей вызываются обработчики новой плагинной системы
- У новости добавлен флаг "Отключить обработку bb-кодов". В этом случае в новость может
  писаться чистый HTML код, движок не следит ни за чем (переносы строк тегами <br> вам 
  придётся делать самим). Помогает в случае размещения JScript кода или просто HTML'я.
- Из ядра удалена сестема кеширования, она будет полностью переписана
- Удалена ненужная js-функция
- Если при добавлении новости вы не указываете альт. имя, то движок автоматически подбирает
  для вас незанятое альт. имя, т.е. проблем при создании тем с одинаковым названием больше
  не будет.

- Удалена потенциальная уязвимость при загрузке GET/POST параметров в глобальную область видимости
- Переработан код, использующий (не к месту) глобальные переменные, всё переведено на использование
  предопределённых массивов $_GET / $_POST

- Переработаны внутренности управления блокировки по IP - во время ввода информации для блокировки
  проводим проверку правильности IP адреса
- Убраны потенциальные XSS уязвимости в блоке "персональные сообщения"

- Добавлена возможность полного управления сортировкой категорий ("позицию" теперь можно выставлять
  не только для категорий первого уровня, но и для всех остальных)
- Удаление категории теперь возможно только в случае, если категория пуста. Ограничение добавлено
  для защиты от случайного нажатия на кнопку "удалить категорию"
- Восстановлена возможность задавать для каждой категории свою иконку

- При редактировании новости в списке "категория" теперь не отображаются те категории к которым
  уже относится новость (и чьи имена прописаны в текстовом поле)
- Оптимизирован механизм отображения списка новостей для редактирования, изменения актуальны
  для крупных порталов с кол-вом пользователей > 1 тыс, новостей > 10 тыс:
  * изменён механизм подсчёта кол-ва новостей
  * в списке авторов (для фильтрации) отображаются только те авторы, у которых есть хотябы одна
    новость, кроме этого, рядом с имемен автора отображается также кол-во его новостей

- Ведение рейтингов вынесено в отдельный плагин и убрано из основного кода
- JScript код, необходимый для добавления комментариев к новостям, вынесен в шаблон comments.form.tpl

- Объединены скрипты добавления новостей через админ панель и на сайте
- Запрещено размещение новостей незарегистрированными пользователям, в шаблоне
  addnews.tpl убрана поддержка тегов [if-guest] ... [/if-guest]

- HTML теги заменены на BB коды в форме добавления/изменения новостей
- Обновлено автоформирование альт. имени для статических страниц

- Убраны XSS уязвимости в профиле пользователя
- Добавлена возможность гибкой регуляции прав постинга HTML в новостях

- Добавлена возможность установки режима сортировки новостей на главной странице

2z project 0.9.6.1, 2007-09-21
----------------------------

Исправление ошибок:
- Исправлена ошибка с постраничной навигацией внутри категории
- Поправлено неправильное отображение кнопки "Сохранить" в настройках системы
- Поправлен механизм восстановления пароля
- Исправлена ошибка при вставке в новость изображений и файлов
- Исправлены ошибки в файле update.php, вызывавшие некорректное обновление
- Исправлена ошибка, когда некорректно отображались комментарии при использовании шаблона, отличного от default
- Исправлена ошибка, когда не открывалась печать новости при включенном ЧПУ
- Исправлена ошибка при создании новой темы в админ-панеле на русском языке
- Исправлена проверка на существование категории, теперь сравнивание проходит по альт. именам категорий
- Исправлено еще несколько мелких ошибок

Другие изменения:
- Файл 2z/includes/inc/links.inc.php перемещен в каталог 2z/conf
- Из скрипта по умолчанию удалена функция массовой рассылки сообщения, она переделана под плагин и доступна на сайте
- Добавлена возможность изменять урлы для плагинов
- Права (chmod) на уменьшенные изображения теперь выставляются правильно
- Добавлено несколько новых экшенов для работоспособности плагинов
- Добавлено управление форматом ссылок при обращении к плагинам
- Из дистрибутива удалена папка readme/


2z project 0.9.6, 2007-08-22
----------------------------
- Начало ведения списка изменений