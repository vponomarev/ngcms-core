<html>
<head>
 <link href="../style.css" rel="stylesheet" type="text/css">
</head>
<body>
<h3><font color="blue"><b>[TWIG]</b></font> Шаблон usermenu.tpl</h3>
<br/>
Шаблон используется для генерации пользовательского меню.<br/>
<ul>
 <li>Если пользователь не залогинен - краткое меню авторизации</li>
 <li>Если пользователь залогинен - ссылки на выход, редактирование своего профиля и админ-панель сайта</li>
</ul>
В зависимости от используемого режима (форма авторизации/меню пользователя) доступен разный набор переменных и блоков.<br/>
<br/>

<h3>Доступные переменные</h3>
<ul>

<h3>Доступные блоки/переменные [ФОРМА АВТОРИЗАЦИИ]</h3>
Блоки:
<ul>
 <li><b>[isnt-logged]</b> ... <b>[/isnt-logged]</b> - содержимое блока отображается если посетитель <u>не авторизован</u> (выводится форма авторизации)</li>
 <li><b>[login]</b> ... <b>[/login]</b> - блок-синоним для блока [isnt-logged] ... [/isnt-logged] (т.е. работает аналогично)</li>
</ul>
<br/>
Переменные:
<ul>
 <li><b>{form_action}</b> - URL формы-обработчика</li>
 <li><b>{redirect}</b> - значение, которое необходимо передать в скрытом поле ввода redirect, позволяет вернуться обратно на страницу (внутри сайта), с которой пользователь авторизовывался</li>
 <li><b>{reg_link}</b> - Ссылка на страницу регистрации</li>
 <li><b>{lost_link}</b> - Ссылка на страницу восстановления потерянного пароля</li>
</ul>
<br/>
Шаблон должен содержать форму (тег <b>&lt;form></b>, метод запроса - <b>POST</b>), которая позволит пользователю авторизоваться.<br/>
В форму должны передаваться следующие переменные:
<ul>
<li><b>redirect</b> (тип: hidden) - поле, в которое помещается значение переменной <b>{redirect}</b></li>
<li><b>username</b> (обычно тип: text) - поле для ввода логина пользователя</li>
<li><b>password</b> (обычно тип: hidden) - поле для ввода пароля пользователя</li>
</ul>
<br/>
Доступные языковые переменные:
<ul>
<li><b>{l_name}</b> - текст-описание для поля формы <b>username</b></li>
<li><b>{l_password}</b> - текст-описание для поля формы <b>password</b></li>
<li><b>{l_login}</b> - текст для кнопки "войти" (тип кнопки: submit)</li>
<li><b>{l_registration}</b> - текст для ссылки "регистрация"</li>
<li><b>{l_lostpassword}</b> - текст для ссылки "восстановить пароль"</li>
</ul>
<br/>

<h3>Доступные блоки/переменные [МЕНЮ ПОЛЬЗОВАТЕЛЯ]</h3>
Блоки:
<ul>
 <li><b>[is-logged]</b> ... <b>[/is-logged]</b> - содержимое блока отображается если пользователь <u>авторизован</u></li>
 <li><b>[if-have-perm]</b> ... <b>[/if-have-perm]</b> - содержимое блока не отображается для пользователей со статусом `комментатор`, обычно используется для скрытия ссылок в админ панель пользователям, которые не имеют туда доступа</li>
</ul>
<br/>
Переменные:
<ul>
 <li><b>{name}</b> - Отображаемое имя (логин) пользователя</li>
 <li><b>{admin_url}</b> - Ссылка на админ-панель</li>
 <li><b>{addnews_link}</b> - Ссылка на форму добавления новости (в админ панели)</li>
 <li><b>{profile_link}</b> - Ссылка на собственный профиль пользователя (для работы необходим плагин <b>uprofile</b>)</li>
 <li><b>{logout_link}</b> - Ссылка для функции "выйти с сайта" (удалить авторизационную информацию)</li>
 <li><b>{pthumb_url}</b> - Ссылка на уменьшенную фотографию пользователя</li>
 <li><b>{avatar_url}</b> - Ссылка на иконку пользователя (поддерживается интеграция с <b>gravatar.com</b>)</li>
</ul>
<br/>
Доступные языковые переменные:
<ul>
<li><b>{l_adminpagel}</b> - текст "Админ-панель" (для ссылки-переменной <b>{admin_url}</b></li>
<li><b>{l_addnews}</b> - текст "Добавить новость" (для ссылки-переменной <b>{addnews_link}</b></li>
<li><b>{l_myprofile}</b> - текст "Мой профиль" (для ссылки-переменной <b>{profile_link}</b></li>
<li><b>{l_logout}</b> - текст "Завершить сеанс!" (для ссылки-переменной <b>{logout_link}</b></li>
</ul>
<br/>


<h3>Пример заполнения шаблона</h3>
<br/>
В примере показан минимально набор для полнофункциональной работы:
<div class="pre">
<pre>
&lt;form name="login" method="post" action="{form_action}">
&lt;input type="hidden" name="redirect" value="{redirect}"/>
[error]{l_login.error}&lt;br/>[/error]
[banned]{l_login.banned}&lt;br/>[/banned]
{l_login.name}: &lt;input type="text" name="username" />&lt;br/>
{l_login.password}: &lt;input type="password" name="password" />&lt;br/>
&lt;input type="submit" value="{l_login.submit}"/>
&lt;/form>
</pre>
</div>

</body>
</html>